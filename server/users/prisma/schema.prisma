// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}


// User:
// id: (PK), u8se imake it easier to view other people's profiles
// userId: (UUID) not null, links to supabase auth table
// Username
// Email - Authentication service unique
// Password hashed
// Proficiency
// Language
model User {
  id           Int           @id @unique @default(autoincrement())
  userId       String        @unique
  email        String        @unique
  username     String?       @unique
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  preferredComplexity Complexity @default(Easy)
  preferredLanguage Language @default(Python)
  @@map("Users")
}

enum Language {
  C
  Cpp
  Java
  Python
  Javascript
}

model Question {
  id         Int          @id @default(autoincrement())
  title      String
  body       String
  categories Category[]
  complexity Complexity
  createdAt  DateTime     @default(now())
  updatedAt  DateTime     @updatedAt
  avgRating  Float       @default(0)
  ratings    Int        @default(0)
  attempts   Int        @default(0)
  solves     Int        @default(0)
	@@map("Questions")
}

model Category {
  id    Int    @id @default(autoincrement())
  name  String @unique
  questions Question[]
  @@map("Categories")
}

enum Complexity {
  Easy
  Medium
  Hard
}
